{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay.js","../src/main.js"],"sourcesContent":["export function createMarkup(photos) {\n  return photos\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <a href='${largeImageURL}' class=\"card-link js-card-link\">\n            <div class=\"photo-card\">\n              <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n              <div class=\"info\">\n                <div class=\"info-item info-item-likes\">\n                  <div class=\"box-likes\"><b>Likes</b>\n                  <span id=\"value\">${likes}</span>\n                  </div>\n                  \n                </div>\n                <p class=\"info-item\">\n                  <b>Views</b>\n                  ${views}\n                </p>\n                <p class=\"info-item\">\n                  <b>Comments</b>\n                  ${comments}\n                </p>\n                <p class=\"info-item\">\n                  <b>Downloads</b>\n                  ${downloads}\n                </p>\n              </div>\n            </div>\n            </a>`;\n      }\n    )\n    .join('');\n}\n","const API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '40619454-a69b8dffcc7de025c5c5357dd';\n\nexport class PixabayAPI {\n  #page = 1;\n  #per_page = 40;\n  #query = '';\n  #totalPhotos = 0;\n\n  async getPhotos() {\n    const params = {\n      q: this.#query,\n      page: this.#page,\n      per_page: this.#per_page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    };\n\n    const url = `${API_URL}?key=${API_KEY}`;\n    const queryString = this.objectToQueryString(params);\n    const data = await fetch(`${url}&${queryString}`);\n\n    const dataFetch = await data.json();\n    return dataFetch;\n  }\n\n  get query() {\n    return this.#query;\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n\n  incrementPage() {\n    this.#page += 1;\n  }\n\n  resetPage() {\n    this.#page = 1;\n  }\n\n  setTotal(total) {\n    this.#totalPhotos = total;\n  }\n\n  objectToQueryString(obj) {\n    return Object.keys(obj)\n      .map(\n        (key) => encodeURIComponent(key) + '=' + encodeURIComponent(obj[key])\n      )\n      .join('&');\n  }\n}\n","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createMarkup } from './js/render-function.js';\nimport { PixabayAPI } from './js/pixabay.js';\nimport SimpleLightbox from \"simplelightbox\";\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.search-form-input'),\n  gallery: document.querySelector('.gallery'),\n  body: document.querySelector('body'),\n  spinner: document.querySelector('.js-spinner'),\n};\n\nspinnerPlay();\n\nwindow.addEventListener('load', () => {\n  console.log('All resources finished loading!');\n  spinnerStop();\n});\n\nconst pixaby = new PixabayAPI();\n\nconst onSubmitClick = async (event) => {\n  event.preventDefault();\n  const searchQuery = event.target.elements.searchQuery;\n  const search_query = searchQuery.value.trim().toLowerCase();\n  if (!search_query) {\n    clearPage();\n    iziToast.error({\n      color: 'red',\n      position: 'topRight',\n      message: `Enter data to search!`,\n    });\n    refs.searchInput.placeholder = 'What`re we looking for?';\n    return;\n  }\n\n  if (search_query === pixaby.query) {\n    iziToast.warning({\n      color: 'yellow',\n      position: 'topRight',\n      message: `We already found images for \"${search_query.toUpperCase()}. Please, enter another phrase`,\n    });\n    return;\n  }\n\n  pixaby.query = search_query;\n  clearPage();\n\n  try {\n    spinnerPlay();\n    const { hits, totalHits } = await pixaby.getPhotos();\n\n    if (hits.length === 0) {\n      iziToast.error({\n        color: 'red',\n        position: 'topRight',\n        message: `Sorry, there are no images matching your ${search_query}. Please try again.`,\n      });\n      return;\n    }\n\n    const markup = createMarkup(hits);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    pixaby.setTotal(totalHits);\n\n    const modalLightboxGallery = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n    });\n    modalLightboxGallery.refresh();\n\n    iziToast.show({\n      color: 'blue',\n      position: 'topRight',\n      message: `Hooray! We found ${totalHits} images.`,\n    });\n  } catch (error) {\n    iziToast.error({\n      color: 'red',\n      position: 'topRight',\n      message: `${error.message}, 'Something went wrong!'`,\n    });\n\n    clearPage();\n  } finally {\n    spinnerStop();\n  }\n};\n\nrefs.form.addEventListener('submit', onSubmitClick);\n\nfunction clearPage() {\n  pixaby.resetPage();\n  refs.gallery.innerHTML = '';\n}\n\nfunction spinnerPlay() {\n  refs.body.classList.add('loading');\n}\n\nfunction spinnerStop() {\n  window.setTimeout(function () {\n    refs.body.classList.remove('loading');\n    refs.body.classList.add('loaded');\n  }, 1500);\n}\n"],"names":["createMarkup","photos","tags","webformatURL","largeImageURL","likes","views","comments","downloads","API_URL","API_KEY","PixabayAPI","__privateAdd","_page","_per_page","_query","_totalPhotos","params","__privateGet","url","queryString","newQuery","__privateSet","total","obj","key","refs","spinnerPlay","spinnerStop","pixaby","onSubmitClick","event","search_query","clearPage","iziToast","hits","totalHits","markup","SimpleLightbox","error"],"mappings":"glCAAO,SAASA,EAAaC,EAAQ,CACnC,OAAOA,EACJ,IACC,CAAC,CACC,KAAAC,EACA,aAAAC,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,uBACQJ,CAAa;AAAA;AAAA,wCAEID,CAAY,UAAUD,CAAI;AAAA;AAAA;AAAA;AAAA,qCAI7BG,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMtBC,CAAK;AAAA;AAAA;AAAA;AAAA,oBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,iBAMxB,EACA,KAAK,EAAE,CACZ,CCzCA,MAAMC,EAAU,2BACVC,EAAU,iDAET,MAAMC,CAAW,CAAjB,cACLC,EAAA,KAAAC,EAAQ,GACRD,EAAA,KAAAE,EAAY,IACZF,EAAA,KAAAG,EAAS,IACTH,EAAA,KAAAI,EAAe,GAEf,MAAM,WAAY,CAChB,MAAMC,EAAS,CACb,EAAGC,EAAA,KAAKH,GACR,KAAMG,EAAA,KAAKL,GACX,SAAUK,EAAA,KAAKJ,GACf,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,EAEUK,EAAM,GAAGV,CAAO,QAAQC,CAAO,GAC/BU,EAAc,KAAK,oBAAoBH,CAAM,EAInD,OADkB,MAFL,MAAM,MAAM,GAAGE,CAAG,IAAIC,CAAW,EAAE,GAEnB,MAE9B,CAED,IAAI,OAAQ,CACV,OAAOF,EAAA,KAAKH,EACb,CAED,IAAI,MAAMM,EAAU,CAClBC,EAAA,KAAKP,EAASM,EACf,CAED,eAAgB,CACdC,EAAA,KAAKT,EAALK,EAAA,KAAKL,GAAS,EACf,CAED,WAAY,CACVS,EAAA,KAAKT,EAAQ,EACd,CAED,SAASU,EAAO,CACdD,EAAA,KAAKN,EAAeO,EACrB,CAED,oBAAoBC,EAAK,CACvB,OAAO,OAAO,KAAKA,CAAG,EACnB,IACEC,GAAQ,mBAAmBA,CAAG,EAAI,IAAM,mBAAmBD,EAAIC,CAAG,CAAC,CACrE,EACA,KAAK,GAAG,CACZ,CACH,CAlDEZ,EAAA,YACAC,EAAA,YACAC,EAAA,YACAC,EAAA,YCAF,MAAMU,EAAO,CACX,KAAM,SAAS,cAAc,cAAc,EAC3C,YAAa,SAAS,cAAc,oBAAoB,EACxD,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,MAAM,EACnC,QAAS,SAAS,cAAc,aAAa,CAC/C,EAEAC,IAEA,OAAO,iBAAiB,OAAQ,IAAM,CACpC,QAAQ,IAAI,iCAAiC,EAC7CC,GACF,CAAC,EAED,MAAMC,EAAS,IAAIlB,EAEbmB,EAAgB,MAAOC,GAAU,CACrCA,EAAM,eAAc,EAEpB,MAAMC,EADcD,EAAM,OAAO,SAAS,YACT,MAAM,KAAM,EAAC,YAAW,EACzD,GAAI,CAACC,EAAc,CACjBC,IACAC,EAAS,MAAM,CACb,MAAO,MACP,SAAU,WACV,QAAS,uBACf,CAAK,EACDR,EAAK,YAAY,YAAc,0BAC/B,MACD,CAED,GAAIM,IAAiBH,EAAO,MAAO,CACjCK,EAAS,QAAQ,CACf,MAAO,SACP,SAAU,WACV,QAAS,gCAAgCF,EAAa,YAAW,CAAE,gCACzE,CAAK,EACD,MACD,CAEDH,EAAO,MAAQG,EACfC,IAEA,GAAI,CACFN,IACA,KAAM,CAAE,KAAAQ,EAAM,UAAAC,CAAS,EAAK,MAAMP,EAAO,UAAS,EAElD,GAAIM,EAAK,SAAW,EAAG,CACrBD,EAAS,MAAM,CACb,MAAO,MACP,SAAU,WACV,QAAS,4CAA4CF,CAAY,qBACzE,CAAO,EACD,MACD,CAED,MAAMK,EAASrC,EAAamC,CAAI,EAChCT,EAAK,QAAQ,mBAAmB,YAAaW,CAAM,EACnDR,EAAO,SAASO,CAAS,EAEI,IAAIE,EAAe,aAAc,CAC5D,aAAc,GACpB,CAAK,EACoB,QAAO,EAE5BJ,EAAS,KAAK,CACZ,MAAO,OACP,SAAU,WACV,QAAS,oBAAoBE,CAAS,UAC5C,CAAK,CACF,OAAQG,EAAO,CACdL,EAAS,MAAM,CACb,MAAO,MACP,SAAU,WACV,QAAS,GAAGK,EAAM,OAAO,2BAC/B,CAAK,EAEDN,GACJ,QAAY,CACRL,GACD,CACH,EAEAF,EAAK,KAAK,iBAAiB,SAAUI,CAAa,EAElD,SAASG,GAAY,CACnBJ,EAAO,UAAS,EAChBH,EAAK,QAAQ,UAAY,EAC3B,CAEA,SAASC,GAAc,CACrBD,EAAK,KAAK,UAAU,IAAI,SAAS,CACnC,CAEA,SAASE,GAAc,CACrB,OAAO,WAAW,UAAY,CAC5BF,EAAK,KAAK,UAAU,OAAO,SAAS,EACpCA,EAAK,KAAK,UAAU,IAAI,QAAQ,CACjC,EAAE,IAAI,CACT"}